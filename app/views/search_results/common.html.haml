- if @user_items.any?
  - if @user_items.first_page? && @user_items.many? && @graph.present?
    = render(partial: 'searches/graph_item',
      locals: {tu: @searched_tw_user, menu: menu, user_items: @user_items, graph: @graph, tweet_text: @tweet_text})

  .page-entries-info-top
    = render(partial: 'searches/page_entries_info',
      locals: {params: {controller: :searches, action: action_name, screen_name: @searched_tw_user.screen_name}, items: @user_items})

  - rendered_uids = []
  %div{id: menu}
    = render(partial: 'search_results/user_item', collection: @user_items, cached: true, locals: {uids: rendered_uids})

  - users = rendered_uids.uniq.map { |uid| @user_items.find { |item| item[:target].uid.to_i == uid.to_i }[:target] }
  = render(partial: 'profiles/modal', collection: users, as: :user, cached: true, locals: {unique_id: nil, searched_tw_user: @searched_tw_user, via: :profile_modal})

  :javascript
    $(function () {
      enableSlickOnUserList('##{menu}');
      $("img.lazy").lazyload();
    });

  .page-entries-info-bottom
    = render(partial: 'searches/page_entries_info',
      locals: {params: {controller: :searches, action: action_name, screen_name: @searched_tw_user.screen_name}, items: @user_items})
- else
  - if user_signed_in?
    - if @searched_tw_user.too_many_friends?(login_user: current_user, context: :search)
      %div= raw t('after_sign_in.empty_and_sign_in_and_too_many_friends', user: @searched_tw_user.mention_name, kaomoji: Kaomoji.unhappy)
    - else
      %div= raw t('after_sign_in.empty_and_other_reason', kaomoji: Kaomoji.happy)
  - else
    - if @searched_tw_user.many_friends?
      %div= raw t('before_sign_in.empty_and_anonymous_and_many_friends', user: @searched_tw_user.mention_name, sign_in_link: link_to(t('dictionary.sign_in'), welcome_path), kaomoji: Kaomoji.happy)
    - else
      %div= raw t('before_sign_in.empty_and_other_reason', sign_in_link: link_to(t('dictionary.sign_in'), welcome_path), kaomoji: Kaomoji.unhappy)
  = render(partial: 'searches/tweet_box', locals: {tweet_text: empty_result_text(title_for(@searched_tw_user, menu: menu))})

= render(partial: 'common/adsense_bottom')

.return-to-results-bottom= link_to(t('searches.common.return', user: @searched_tw_user.mention_name), search_path(screen_name: @searched_tw_user.screen_name))
