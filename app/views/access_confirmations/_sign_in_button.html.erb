<% url_options = {share_dialog: 1, follow_dialog: 1, sign_in_dialog: 1, purchase_dialog: 1} %>

<% if user_signed_in? %>
  <% url = timeline_path(url_options.merge(screen_name: current_user.screen_name, via: current_via('timeline_button'))) %>
  <%= link_to url, class: 'btn btn-primary btn-block' do %>
    <img class="rounded" height="20" src="<%= image_path('/logo_transparent_96x96.png') %>">
    <%= t('.timeline_label', user: current_user.screen_name) %>
  <% end %>
<% else %>
  <% url = access_confirmations_path(url_options.merge(user_token: params[:user_token], via: current_via('sign_in_button'))) %>
  <%= link_to sign_in_path(via: current_via('sign_in_button'), redirect_path: url), class: 'btn btn-primary btn-block' do %>
    <img class="rounded" height="20" src="<%= image_path('/logo_transparent_96x96.png') %>">
    <%= t('.sign_in_label') %>
  <% end %>
<% end %>
