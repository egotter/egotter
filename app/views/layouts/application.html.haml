!!!
%html{lang: 'ja'}
  %head
    %meta{content: 'text/html; charset=UTF-8', 'http-equiv' => 'Content-Type'}
    %meta{charset: 'utf-8'}
    %meta{content: 'IE=edge', 'http-equiv' => 'X-UA-Compatible'}
    %meta{content: 'width=device-width, initial-scale=1', name: 'viewport'}
    %link{rel: "icon", sizes: "192x192", href: image_path('/favicon-192.png')}
    %link{href: '/apple-touch-icon.png', rel: 'apple-touch-icon'}
    %link{href: '/apple-touch-icon-120x120.png', rel: 'apple-touch-icon', sizes: '120x120'}
    %link{href: '/apple-touch-icon-152x152.png', rel: 'apple-touch-icon', sizes: '152x152'}
    = render partial: 'common/meta_tags'
    %meta{content: 'summary_large_image', name: 'twitter:card'}
    %meta{content: '@ego_tter', name: 'twitter:site'}
    %link{href: '//maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css', rel: 'stylesheet'}
    %link{href: '//code.jquery.com/ui/1.12.0/themes/cupertino/jquery-ui.min.css', rel: 'stylesheet'}
    = stylesheet_link_tag 'application', media: 'all'
    = javascript_include_tag 'application'
    %script{src: '//code.jquery.com/ui/1.12.0/jquery-ui.js'}
    %script{src: '//cdnjs.cloudflare.com/ajax/libs/jquery.lazyload/1.9.1/jquery.lazyload.min.js'}
    %script{src: '//maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js'}
    %link{crossorigin: "anonymous", href: "//use.fontawesome.com/releases/v5.6.3/css/all.css", integrity: "sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/", rel: "stylesheet"}
    = csrf_meta_tags

    = yield(:canonical_url) if content_for?(:canonical_url)

    - if Rails.env.production?
      :javascript
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
      - if user_signed_in?
        :javascript
          ga('create', 'UA-13072051-3', 'auto', {'userId': '#{current_user.id}'});
      - else
        :javascript
          ga('create', 'UA-13072051-3', 'auto');
      :javascript
        ga('send', 'pageview');

      %script{async: '', src: '//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js'}
      :javascript
        (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-3146843071247817",
          enable_page_level_ads: true,
          overlays: {bottom: true}
        });

    - if user_signed_in?
      - if Rails.env.production?
        %link{href: '/manifest.json', rel: 'manifest'}
      %script{src: 'https://cdn.onesignal.com/sdks/OneSignalSDK.js'}
      :javascript
        #{render(partial: 'common/onesignal', formats: %i(js))}

    - if user_signed_in?
      :javascript
        #{render(partial: 'common/rollbar', formats: %i(js))}

    :javascript
      window.twttr = (function(d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0], t = window.twttr || {};
        if (d.getElementById(id)) return t;
        js = d.createElement(s);
        js.id = id;
        js.src = "https://platform.twitter.com/widgets.js";
        fjs.parentNode.insertBefore(js, fjs);

        t._e = [];
        t.ready = function(f) {
          t._e.push(f);
        };

        return t;
      }(document, "script", "twitter-wjs"));

  %body
    - if show_simple_header?
      %h1.top_header
        = image_tag '/logo_96x96.png', size: '48x48', alt: t('searches.common.egotter')
        %span= I18n.t('searches.common.egotter')
    - else
      %nav.navbar.navbar-default
        .container
          .row
            .col-xs-12.header-container
              = render partial: 'layouts/header'

    - unless under_maintenance?
      #search-histories-wrapper
      :javascript
        $(function () {
          var url = '#{load_search_histories_path}';
          new AsyncLoader(url, '#search-histories-wrapper').load();
        });

    - if notice || alert
      .container
        .row
          .col-xs-12.notice-container
            - if notice
              %p.alert.alert-info.alert-dismissable{style: 'margin-top: 15px;'}
                %a.close(href="#" data-dismiss="alert" aria-label="close") &times;
                = raw notice
            - if alert
              %p.alert.alert-warning.alert-dismissable{style: 'margin-top: 15px;'}
                %a.close(href="#" data-dismiss="alert" aria-label="close") &times;
                = raw alert

    .container.main-container
      .row
        .col-xs-12.yield-container{class: "#{'col-sm-12 col-md-9 col-lg-9' if show_sidebar?}"}
          = breadcrumbs style: :bootstrap, autoroot: false, link_current: true

          %script{id: 'user-template', type: 'x-tmpl-mustache'}
            = search_link '{{screen_name}}', build_via('{{menu_name}}'), unescape: true, style: 'display: inline-block;' do
              %img.img-rounded{src: '{{profile_image_url_https}}', alt: '{{screen_name}}', width: 48, height: 48}
          :javascript
            $(function () {
              Mustache.parse($('#user-template').html());
            });

          = yield
        - if show_sidebar?
          .hidden-xs.hidden-sm.col-md-3.col-lg-3.sidebar.text-center{style: 'padding-top: 15px;'}
            = render partial: 'layouts/sidebar', locals: {twitter_user: @twitter_user}


    %script{src: '//cdnjs.cloudflare.com/ajax/libs/jquery.sticky/1.0.3/jquery.sticky.min.js', type: 'text/javascript'}
    %script{src: '//code.highcharts.com/7.0.2/highcharts.js', type: 'text/javascript'}
    %script{src: '//code.highcharts.com/7.0.2/highcharts-more.js', type: 'text/javascript'}
    %script{src: '//code.highcharts.com/7.0.2/modules/drilldown.js', type: 'text/javascript'}
    %script{src: '//code.highcharts.com/7.0.2/modules/solid-gauge.js', type: 'text/javascript'}
    %script{src: '//cdnjs.cloudflare.com/ajax/libs/d3/4.2.7/d3.min.js', type: 'text/javascript'}
    %script{src: '//cdnjs.cloudflare.com/ajax/libs/d3-cloud/1.2.3/d3.layout.cloud.min.js', type: 'text/javascript'}
    %script{src: '//cdnjs.cloudflare.com/ajax/libs/mustache.js/2.3.0/mustache.min.js', type: 'text/javascript'}
    %link{href: '//cdn.jsdelivr.net/jquery.jssocials/1.3.1/jssocials.css', rel: 'stylesheet', type: 'text/css'}
    %link{href: '//cdn.jsdelivr.net/jquery.jssocials/1.3.1/jssocials-theme-flat.css', rel: 'stylesheet', type: 'text/css'}
    %script{src: '//cdn.jsdelivr.net/jquery.jssocials/1.3.1/jssocials.min.js'}

    - if %w(search_results home waiting searches one_sided_friends unfriends inactive_friends friends conversations relationships statuses update_histories clusters).include?(controller_name)
      - unless user_signed_in?
        .container
          .row
            .col-xs-12.pre-footer.text-center
              %h2.h4= t('searches.new.feature_007')
              = t('searches.new.feature_desc_007_html', url: sign_in_path(via: build_via('feature_desc_007_bottom')))
              = sign_in_with_twitter_link(nil, 'button_bottom', class: 'btn btn-info btn-block', style: 'margin-top: 15px; margin-bottom: 15px;')

      .container
        .row
          .col-xs-12.pre-footer
            %h2.h4.text-center= t('searches.common.popular')
            .row
              - top_page_paths.each do |path, label|
                .col-xs-12.col-sm-4.col-md-3.col-lg-3{style: 'margin-bottom: 15px;'}
                  %div{style: 'max-width: 400px; margin-left: auto; margin-right: auto; position: relative; border: 4px solid #999999;'}
                    = link_to path, style: 'display: block;' do
                      = image_tag '/egotter_icon_400x400.jpg', class: 'img-responsive'
                      %div{style: 'font-size: x-large; color: white; padding: 4px 8px; background: rgb(0, 0, 0); background: rgba(0, 0, 0, 0.7); position: absolute; left: 0; bottom: 0; width: 100%;'}= label

      .container
        .row
          .col-xs-12.pre-footer
            %h2.h4.text-center= t('searches.common.information')
            %table.table.table-bordered.table-condensed.table-responsive
              = render(partial: 'information/information', collection: information_list, cached: true)

    = render partial: 'layouts/footer' unless under_maintenance?